<!DOCTYPE html><html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Buscaminas Cl√°sico</title>
  <style>
    body {
      font-family: sans-serif;
      background: #111;
      color: white;
      text-align: center;
    }
    table {
      margin: 20px auto;
      border-spacing: 0;
    }
    td {
      width: 40px;
      height: 40px;
      border: 1px solid #555;
      background: #444;
      color: white;
      font-weight: bold;
      font-size: 20px;
      text-align: center;
      vertical-align: middle;
      user-select: none;
    }
    td.revealed {
      background: #222;
    }
  </style>
</head>
<body>
  <h1>Buscaminas</h1>
  <table id="board"></table>
  <script>
    const rows = 9;
    const cols = 9;
    const mines = 9;
    let board = document.getElementById("board");
    let grid = [];
    let revealed = [];
    let firstClick = true;function initBoard() {
  board.innerHTML = "";
  grid = Array(rows).fill().map(() => Array(cols).fill(0));
  revealed = Array(rows).fill().map(() => Array(cols).fill(false));
  for (let i = 0; i < rows; i++) {
    let tr = document.createElement("tr");
    for (let j = 0; j < cols; j++) {
      let td = document.createElement("td");
      td.dataset.i = i;
      td.dataset.j = j;
      td.addEventListener("click", cellClick);
      td.addEventListener("contextmenu", markCell);
      tr.appendChild(td);
    }
    board.appendChild(tr);
  }
}

function placeMines(excludeI, excludeJ) {
  let placed = 0;
  while (placed < mines) {
    let i = Math.floor(Math.random() * rows);
    let j = Math.floor(Math.random() * cols);
    if ((i !== excludeI || j !== excludeJ) && grid[i][j] !== "M") {
      grid[i][j] = "M";
      placed++;
    }
  }
  for (let i = 0; i < rows; i++) {
    for (let j = 0; j < cols; j++) {
      if (grid[i][j] === "M") continue;
      let count = 0;
      for (let di = -1; di <= 1; di++) {
        for (let dj = -1; dj <= 1; dj++) {
          let ni = i + di;
          let nj = j + dj;
          if (ni >= 0 && ni < rows && nj >= 0 && nj < cols && grid[ni][nj] === "M") {
            count++;
          }
        }
      }
      grid[i][j] = count;
    }
  }
}

function reveal(i, j) {
  if (i < 0 || i >= rows || j < 0 || j >= cols || revealed[i][j]) return;
  let cell = board.children[i].children[j];
  revealed[i][j] = true;
  cell.classList.add("revealed");
  if (grid[i][j] === "M") {
    cell.textContent = "üí£";
    alert("Perdiste");
    initBoard();
    firstClick = true;
    return;
  }
  if (grid[i][j] > 0) {
    cell.textContent = grid[i][j];
  } else {
    for (let di = -1; di <= 1; di++) {
      for (let dj = -1; dj <= 1; dj++) {
        reveal(i + di, j + dj);
      }
    }
  }
}

function cellClick(e) {
  let i = parseInt(this.dataset.i);
  let j = parseInt(this.dataset.j);
  if (firstClick) {
    placeMines(i, j);
    firstClick = false;
  }
  reveal(i, j);
}

function markCell(e) {
  e.preventDefault();
  let i = parseInt(this.dataset.i);
  let j = parseInt(this.dataset.j);
  let cell = board.children[i].children[j];
  if (revealed[i][j]) return;
  cell.textContent = cell.textContent === "üö©" ? "" : "üö©";
}

initBoard();

  </script>
</body>
</html>